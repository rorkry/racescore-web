@echo off
chcp 65001 > nul
echo ============================================================
echo ğŸ‡ ç«¶é¦¬æŒ‡æ•°ãƒ‡ãƒ¼ã‚¿ çµåˆãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ„ãƒ¼ãƒ«
echo ============================================================
echo.

REM ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /d "%~dp0"

REM Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
where node >nul 2>nul
if %ERRORLEVEL% neq 0 (
    echo âŒ Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“
    echo    https://nodejs.org/ ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„
    pause
    exit /b 1
)

REM ts-nodeãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã€ãªã‘ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
call npx ts-node --version >nul 2>nul
if %ERRORLEVEL% neq 0 (
    echo ğŸ“¦ ts-nodeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­...
    call npm install -g ts-node typescript
)

REM ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
echo ğŸš€ æŒ‡æ•°ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’é–‹å§‹ã—ã¾ã™...
echo.
call npx ts-node tools/upload-indices.ts

echo.
echo ============================================================
echo å‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸ
echo ============================================================
pause
